# üîì –£—Ä–æ–∫ 3: Open/Closed Principle (OCP)

## üéØ –¶–µ–ª–∏ —É—Ä–æ–∫–∞

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ:
- ‚úÖ –ü–æ–Ω–∏–º–∞—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é "–æ—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏"
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—à–∏—Ä—è–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–¥, —É—Å—Ç–æ–π—á–∏–≤—ã–π –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OCP –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

## üöÄ –ú–æ—Ç–∏–≤–∞—Ü–∏—è: –ø—Ä–æ–±–ª–µ–º–∞ –∏–∑–º–µ–Ω—è—é—â–∏—Ö—Å—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

### üìä –ü—Ä–æ–±–ª–µ–º–∞: —Ü–µ–ø–æ—á–∫–∞ if-elif

```mermaid
graph LR
    A[PaymentProcessor] --> B{–¢–∏–ø –ø–ª–∞—Ç–µ–∂–∞?}
    B -->|card| C[–ö–æ–¥ –¥–ª—è –∫–∞—Ä—Ç—ã]
    B -->|cash| D[–ö–æ–¥ –¥–ª—è –Ω–∞–ª–∏—á–Ω—ã—Ö]
    B -->|crypto| E[–ö–æ–¥ –¥–ª—è –∫—Ä–∏–ø—Ç—ã]
    B -->|–Ω–æ–≤—ã–π —Ç–∏–ø| F[üí• –ù—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥!]
    
    style F fill:#ff6b6b
```

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤—ã —Å–æ–∑–¥–∞–ª–∏ —Å–∏—Å—Ç–µ–º—É –ø–ª–∞—Ç–µ–∂–µ–π, –∏ –≤–¥—Ä—É–≥ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã...

```python
class PaymentProcessor:
    def process_payment(self, amount: float, payment_type: str) -> bool:
        if payment_type == "credit_card":
            print(f"Credit card payment: ${amount}")
            return True
        elif payment_type == "debit_card":
            print(f"Debit card payment: ${amount}")
            return True
        # üí• –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± = –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞!
        elif payment_type == "crypto":  # –ü—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥
            print(f"Crypto payment: ${amount}")
            return True
        else:
            raise ValueError(f"Unknown payment type: {payment_type}")
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- üîß **–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —Ç–∏–ø –ø–ª–∞—Ç–µ–∂–∞** —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞
- üêõ **–†–∏—Å–∫ –ø–æ–ª–æ–º–∞—Ç—å** —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É
- üß™ **–ù—É–∂–Ω–æ –ø–µ—Ä–µ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –≤–µ—Å—å –º–µ—Ç–æ–¥
- üìà **–ú–µ—Ç–æ–¥ —Ä–∞—Å—Ç–µ—Ç** –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω–µ–µ

---

## üìñ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ OCP

!!! quote "–ü—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏"
    **–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –Ω–æ –∑–∞–∫—Ä—ã—Ç—ã –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.**

### üí° –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫—É—é —Ä–æ–∑–µ—Ç–∫—É:
- ‚úÖ **–û—Ç–∫—Ä—ã—Ç–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**: –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ª—é–±–æ–π –ø—Ä–∏–±–æ—Ä (—á–∞–π–Ω–∏–∫, —Ç–µ–ª–µ—Ñ–æ–Ω, –Ω–æ—É—Ç–±—É–∫)
- ‚úÖ **–ó–∞–∫—Ä—ã—Ç–∞ –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏**: –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å —Ä–æ–∑–µ—Ç–∫—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–±–æ—Ä–∞

–í –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏:
- **–û—Ç–∫—Ä—ã—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è** - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
- **–ó–∞–∫—Ä—ã—Ç—ã –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏** - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω—è—Ç—å—Å—è
- **–ù–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è = –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã, –ù–ï –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç–∞—Ä—ã—Ö**

### üéØ –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

**–ë–µ–∑ OCP:**
```python
# –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —Ç–∏–ø = –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
def process_payment(payment_type):
    if payment_type == "card":
        # –∫–æ–¥ –¥–ª—è –∫–∞—Ä—Ç—ã
    elif payment_type == "cash":
        # –∫–æ–¥ –¥–ª—è –Ω–∞–ª–∏—á–Ω—ã—Ö
    # üí• –ù–æ–≤—ã–π —Ç–∏–ø? –ù—É–∂–Ω–æ –º–µ–Ω—è—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥!
```

**–° OCP:**
```python
# –ù–æ–≤—ã–π —Ç–∏–ø = –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å, —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º
class PaymentMethod(Protocol):
    def process(self, amount): ...

class CardPayment: ...
class CashPayment: ...
class CryptoPayment: ...  # ‚úÖ –î–æ–±–∞–≤–∏–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞!
```

### üéØ –ö–∞–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ OCP?

**–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º:**
- –î–ª–∏–Ω–Ω—ã–µ `if-elif` —Ü–µ–ø–æ—á–∫–∏ –¥–ª—è —Ç–∏–ø–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–º–Ω–∏—Ç—å "–≥–¥–µ –µ—â–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø"

---

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏

### –®–∞–≥ 1: –°–æ–∑–¥–∞–µ–º –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é

```python
from typing import Protocol

class PaymentMethod(Protocol):
    """–ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ –ø–ª–∞—Ç–µ–∂–∞"""
    def process(self, amount: float) -> bool:
        """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂"""
        ...
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```python
class CreditCardPayment:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–ª–∞—Ç–µ–∂–µ–π –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç–æ–π"""
    def process(self, amount: float) -> bool:
        print(f"Credit card payment: ${amount}")
        return True

class DebitCardPayment:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ–±–µ—Ç–æ–≤—ã—Ö –∫–∞—Ä—Ç"""
    def process(self, amount: float) -> bool:
        print(f"Debit card payment: ${amount}")
        return True

class CryptoPayment:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π"""
    def process(self, amount: float) -> bool:
        print(f"Crypto payment: ${amount}")
        return True
```

### –®–∞–≥ 3: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

```python
class PaymentProcessor:
    """‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø–ª–∞—Ç–µ–∂–µ–π - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç OCP"""
    
    def process_payment(self, payment_method: PaymentMethod, amount: float) -> bool:
        """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ –ª—é–±—ã–º —Å–ø–æ—Å–æ–±–æ–º"""
        return payment_method.process(amount)
```

### –®–∞–≥ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
# –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
processor = PaymentProcessor()

# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–ø–æ—Å–æ–±—ã
processor.process_payment(CreditCardPayment(), 100.0)
processor.process_payment(CryptoPayment(), 200.0)

# ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –ù–û–í–´–ô —Å–ø–æ—Å–æ–± –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞!
class ApplePayPayment:
    def process(self, amount: float) -> bool:
        print(f"Apple Pay payment: ${amount}")
        return True

processor.process_payment(ApplePayPayment(), 300.0)  # –†–∞–±–æ—Ç–∞–µ—Ç!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `PaymentProcessor` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏!

### üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å OCP

```mermaid
graph TB
    A[PaymentProcessor<br/>–ó–∞–∫—Ä—ã—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π] --> B[PaymentMethod<br/>–ü—Ä–æ—Ç–æ–∫–æ–ª]
    
    B --> C[CreditCardPayment]
    B --> D[DebitCardPayment]
    B --> E[CryptoPayment]
    B --> F[ApplePayPayment<br/>‚úÖ –ù–æ–≤—ã–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π]
    
    style A fill:#51cf66
    style B fill:#74c0fc
    style F fill:#ffd93d
```

---

## üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–∞–∫ –ø—Ä–∏–º–µ—Ä OCP

> üí° **–°–≤—è–∑—å OCP –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**
>
> –°–æ–±–ª—é–¥–µ–Ω–∏–µ OCP –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Ä–µ—à–µ–Ω–∏—è–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–∂–µ –±—ã–ª–∏ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ –ø–∞—Ç—Ç–µ—Ä–Ω—ã. **Strategy –ø–∞—Ç—Ç–µ—Ä–Ω** - –∏–¥–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è OCP!

### Strategy Pattern –¥–ª—è OCP

```python
from typing import Protocol

class DiscountStrategy(Protocol):
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–∫–∏–¥–æ–∫"""
    def calculate(self, price: float) -> float:
        """–í—ã—á–∏—Å–ª—è–µ—Ç —Ü–µ–Ω—É —Å–æ —Å–∫–∏–¥–∫–æ–π"""
        ...

class NoDiscount:
    """–ë–µ–∑ —Å–∫–∏–¥–∫–∏"""
    def calculate(self, price: float) -> float:
        return price

class PercentDiscount:
    """–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å–∫–∏–¥–∫–∞"""
    def __init__(self, percent: float):
        self.percent = percent
    
    def calculate(self, price: float) -> float:
        return price * (1 - self.percent / 100)

class FixedDiscount:
    """–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞"""
    def __init__(self, amount: float):
        self.amount = amount
    
    def calculate(self, price: float) -> float:
        return max(0, price - self.amount)

class PriceCalculator:
    """‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ü–µ–Ω - –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏, –æ—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è"""
    
    def __init__(self, discount_strategy: DiscountStrategy):
        self.discount_strategy = discount_strategy
    
    def calculate_final_price(self, base_price: float) -> float:
        return self.discount_strategy.calculate(base_price)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
calculator = PriceCalculator(PercentDiscount(20))  # 20% —Å–∫–∏–¥–∫–∞
final_price = calculator.calculate_final_price(100.0)  # 80.0

# ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å–∫–∏–¥–æ–∫
class StudentDiscount:
    def calculate(self, price: float) -> float:
        return price * 0.5  # 50% —Å–∫–∏–¥–∫–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

student_calculator = PriceCalculator(StudentDiscount())
student_price = student_calculator.calculate_final_price(100.0)  # 50.0
```

---

## üéÆ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥:**
```python
class NotificationService:
    def send_notification(self, user, message, method="email"):
        if method == "email":
            print(f"Email to {user.email}: {message}")
        elif method == "sms":
            print(f"SMS to {user.phone}: {message}")
        elif method == "push":
            print(f"Push to {user.device}: {message}")
```

**–ó–∞–¥–∞–Ω–∏–µ:**
1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ç–æ–∫–æ–ª `BaseNotification`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞
3. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ `NotificationService` –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è OCP
4. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, Telegram) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞

**üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è:**
> **–ê–Ω–∞–ª–∏–∑:** –£ `NotificationService` **3 —Å–ø–æ—Å–æ–±–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** –≤ if-elif —Ü–µ–ø–æ—á–∫–µ
>
> **–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å:**
> - üìã **1 Protocol** `BaseNotification` —Å –º–µ—Ç–æ–¥–æ–º `send(user, message)`
> - üîß **3 —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–∞–Ω–∞–ª–æ–≤: `EmailNotification`, `SMSNotification`, `PushNotification`
> - üéØ **1 —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã–π** `NotificationService` –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
> - ‚ú® **1 –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `TelegramNotification`) –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–æ–∑–¥–∞–π—Ç–µ —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤ (INFO, WARNING, ERROR)
- –†–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –≤—ã–≤–æ–¥–∞ (–∫–æ–Ω—Å–æ–ª—å, —Ñ–∞–π–ª, —Å–µ—Ç—å)
- –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã–≤–æ–¥–∞

**üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
> **–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:** **2 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ—Å–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**
>
> **–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å:**
> - üìã **1 Protocol** `BaseLogger` —Å –º–µ—Ç–æ–¥–æ–º `write(level, message)`
> - üîß **3+ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: `ConsoleLogger`, `FileLogger`, `NetworkLogger`
> - üéØ **1 –∫–ª–∞—Å—Å** `LogManager` –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ª—é–±–æ–π `BaseLogger`
> - üîç **Enum** –¥–ª—è —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –ê–Ω–∞–ª–∏–∑ –æ—Ç—á–µ—Ç–æ–≤

```python
class ReportGenerator:
    def generate_report(self, data, format_type):
        if format_type == "pdf":
            return self._generate_pdf(data)
        elif format_type == "excel":
            return self._generate_excel(data)
        elif format_type == "html":
            return self._generate_html(data)
```

**–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
1. **–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã OCP –≤—ã –≤–∏–¥–∏—Ç–µ?**
   > üí° *–ü–æ–¥—Å–∫–∞–∑–∫–∞: —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ JSON –∏ CSV —Ñ–æ—Ä–º–∞—Ç–æ–≤?*

2. **–ö–∞–∫ –±—ã –≤—ã —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–ª–∏ –∫–æ–¥?**
   > üí° *–ü–æ–¥—Å–∫–∞–∑–∫–∞: –Ω—É–∂–µ–Ω Protocol `ReportFormatter` –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞*

3. **–ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∞—Å—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥?**
   > üí° *–ü–æ–¥—Å–∫–∞–∑–∫–∞: –Ω–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π + –ª–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ*

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

1. **OCP = —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã, –∞ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö**
2. **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ (Protocol) —Å–æ–∑–¥–∞—é—Ç —Ç–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**
3. **Strategy –ø–∞—Ç—Ç–µ—Ä–Ω - –∏–¥–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä OCP**
4. **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ç–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∑–∞—Ä–∞–Ω–µ–µ**
5. **OCP –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —É—Å—Ç–æ–π—á–∏–≤—ã–º –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π**

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

!!! success "–ß—Ç–æ –≤—ã —É–∑–Ω–∞–ª–∏"
    - ‚úÖ –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –Ω–æ –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
    - ‚úÖ –ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ (Protocol) —Å–æ–∑–¥–∞—é—Ç —Ç–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
    - ‚úÖ –ù–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è = –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã, –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç–∞—Ä—ã—Ö

!!! tip "–ü—Ä–∞–∫—Ç–∏–∫–∞"
    –ù–∞–π–¥–∏—Ç–µ –≤ —Å–≤–æ–µ–º –∫–æ–¥–µ –¥–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ if-elif. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å –∏—Ö –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã.

–¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã –∏–∑—É—á–∏—Ç—å **[–ü—Ä–∏–Ω—Ü–∏–ø –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –õ–∏—Å–∫–æ–≤](04-liskov-substitution.md)** - –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è!

---

!!! tip "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç"
    –ù–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –í–°–ï –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –ù–∞—á–Ω–∏—Ç–µ —Å –æ—á–µ–≤–∏–¥–Ω—ã—Ö —Ç–æ—á–µ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –≤–∞—à–µ–º –∫–æ–¥–µ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è –Ω–∏—Ö.

## üß™ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è: OCP

<div class="quiz-container" id="ocp-quiz">
<script type="application/json">
{
  "title": "Open/Closed Principle",
  "description": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏",
  "icon": "üîì",
  "questions": [
    {
      "question": "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –û—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–ó–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏ (OCP)?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–ö–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –¥–ª—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è", "correct": false},
        {"text": "–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –Ω–æ –∑–∞–∫—Ä—ã—Ç—ã –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏", "correct": true},
        {"text": "–í—Å–µ –º–µ—Ç–æ–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—É–±–ª–∏—á–Ω—ã–º–∏", "correct": false},
        {"text": "–ö–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç—ã –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π", "correct": false}
      ],
      "explanation": "OCP –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞"
    },
    {
      "question": "–ö–∞–∫–æ–π –∫–æ–¥ –Ω–∞—Ä—É—à–∞–µ—Ç OCP?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–ö–ª–∞—Å—Å —Å –æ–¥–Ω–∏–º –º–µ—Ç–æ–¥–æ–º", "correct": false},
        {"text": "–î–ª–∏–Ω–Ω—ã–µ if-elif —Ü–µ–ø–æ—á–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤", "correct": true},
        {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤", "correct": false},
        {"text": "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤", "correct": false}
      ],
      "explanation": "if-elif —Ü–µ–ø–æ—á–∫–∏ —Ç—Ä–µ–±—É—é—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤"
    },
    {
      "question": "–ö–∞–∫ –ª—É—á—à–µ –≤—Å–µ–≥–æ —Å–æ–±–ª—é–¥–∞—Ç—å OCP –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —É—Å–ª–æ–≤–∏–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥", "correct": false},
        {"text": "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª PaymentMethod –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã", "correct": true},
        {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ", "correct": false},
        {"text": "–°–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤", "correct": false}
      ],
      "explanation": "–ü—Ä–æ—Ç–æ–∫–æ–ª –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å–ø–æ—Å–æ–±—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞"
    },
    {
      "question": "–ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∞–µ—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏–µ OCP?",
      "type": "multiple",
      "points": 2,
      "options": [
        {"text": "–ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É—Å—Ç–æ–π—á–∏–≤—ã–º –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º", "correct": true},
        {"text": "–£–º–µ–Ω—å—à–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–æ–≤", "correct": false},
        {"text": "–°–Ω–∏–∂–∞–µ—Ç—Å—è —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫", "correct": true},
        {"text": "–£–ª—É—á—à–∞–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å", "correct": true},
        {"text": "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã", "correct": false}
      ],
      "explanation": "OCP –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —É—Å—Ç–æ–π—á–∏–≤—ã–º, —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫–∏ –∏ —É–ª—É—á—à–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å"
    }
  ]
}
</script>
</div>

## üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: OCP –≤ –¥–µ–π—Å—Ç–≤–∏–∏

**–ó–∞–¥–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–ª–µ–¥—É—é—â—É—é OCP

```python
# –ò–°–•–û–î–ù–´–ô –ö–û–î (–Ω–∞—Ä—É—à–∞–µ—Ç OCP):
class DocumentProcessor:
    def process(self, document, doc_type):
        if doc_type == "pdf":
            return f"Processing PDF: {document}"
        elif doc_type == "word":
            return f"Processing Word: {document}"
        elif doc_type == "excel":
            return f"Processing Excel: {document}"

# –ó–ê–î–ê–ù–ò–ï: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º OCP
# TODO: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ç–æ–∫–æ–ª DocumentHandler
# TODO: –†–µ–∞–ª–∏–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
# TODO: –°–æ–∑–¥–∞–π—Ç–µ DocumentProcessor —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–µ–π
# TODO: –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

from typing import Protocol

class DocumentHandler(Protocol):
    def process(self, document: str) -> str: ...

# TODO: –í–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–¥–µ—Å—å
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤!