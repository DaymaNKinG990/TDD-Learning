# üèóÔ∏è –£—Ä–æ–∫ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## üéØ –¶–µ–ª–∏ —É—Ä–æ–∫–∞

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ:
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å PostgreSQL –∏ Redis –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Apache Kafka –¥–ª—è event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å docker-compose —Ñ–∞–π–ª—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –û—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞–∫ –∫–æ–¥

## üê≥ Docker –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

### üí° –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

**–ê–Ω–∞–ª–æ–≥–∏—è**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≥—Ä—É–∑–æ–≤
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** = —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä, –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫—Ä–µ–ø–ª–µ–Ω–∏—è)
- **–ò–∑–æ–ª—è—Ü–∏—è** = –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Ç–¥–µ–ª–µ–Ω –æ—Ç –¥—Ä—É–≥–∏—Ö (–Ω–µ –º–µ—à–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É)
- **–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** = –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ (–Ω–∞ –∫–æ—Ä–∞–±–ª–µ, –ø–æ–µ–∑–¥–µ, –≥—Ä—É–∑–æ–≤–∏–∫–µ)
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** = –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**–í –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏:**
- Docker = —Å–ø–æ—Å–æ–± —É–ø–∞–∫–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ –≤—Å–µ–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –ª—é–±–æ–π –º–∞—à–∏–Ω–µ
- –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å - –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ–ª—å—à–µ –∫–æ–ø–∏–π

### üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è Docker –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```mermaid
graph TB
    A[Docker Host] --> B[Container 1<br/>Sales Service]
    A --> C[Container 2<br/>Inventory Service]
    A --> D[Container 3<br/>PostgreSQL]
    A --> E[Container 4<br/>Kafka]
    
    B -->|Network| C
    B -->|Database| D
    B -->|Events| E
    
    F[Docker Compose] --> A
    
    style A fill:#4dabf7
    style F fill:#51cf66
    style B fill:#ffd43b
    style C fill:#ff6b6b
    style D fill:#74c0fc
    style E fill:#f783ac
```

### üéØ –ó–∞—á–µ–º Docker?

Docker –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö
- **–ò–∑–æ–ª—è—Ü–∏—è** - —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- **Dev/Prod parity** - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ = –ø—Ä–æ–¥–∞–∫—à–µ–Ω
- **–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ —á–∞—Å–æ–≤

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
üìÅ e-commerce-platform/
‚îú‚îÄ‚îÄ üìÅ docker/
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ docker-compose.yml          # –û—Å–Ω–æ–≤–Ω–æ–π compose —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ docker-compose.override.yml # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Dockerfile                  # Dockerfile –¥–ª—è Python —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ üìÅ services/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ sales-service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Dockerfile
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ requirements.txt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ inventory-service/
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ payment-service/
‚îú‚îÄ‚îÄ üìÅ infrastructure/
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ init-db.sql                 # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ kafka-setup.sh             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kafka
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ monitoring/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îî‚îÄ‚îÄ üìÅ docs/
    ‚îî‚îÄ‚îÄ üìÑ infrastructure.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```

### üê≥ Dockerfile –¥–ª—è Python —Å–µ—Ä–≤–∏—Å–æ–≤

```dockerfile
# üìÑ services/sales-service/Dockerfile
FROM python:3.12-slim

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN apt-get update && apt-get install -y \
    gcc \
    postgresql-client \
    curl \
    && rm -rf /var/lib/apt/lists/*

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
RUN useradd --create-home --shell /bin/bash app
USER app

# –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
WORKDIR /home/app

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY requirements.txt .
COPY pyproject.toml .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
COPY src/ .

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
ENV PYTHONPATH=/home/app
ENV PYTHONUNBUFFERED=1

# Health check
HEALTHCHECK --interval=30s --timeout=30s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8000/health || exit 1

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]
```

### üìã docker-compose.yml

```yaml
# üìÑ docker/docker-compose.yml
version: '3.8'

services:
  # PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  postgres:
    image: postgres:15-alpine
    container_name: e-commerce-postgres
    environment:
      POSTGRES_DB: ecommerce
      POSTGRES_USER: ecommerce_user
      POSTGRES_PASSWORD: ecommerce_pass
      POSTGRES_INITDB_ARGS: "--encoding=UTF-8"
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./infrastructure/init-db.sql:/docker-entrypoint-initdb.d/init-db.sql
    networks:
      - ecommerce-network
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ecommerce_user -d ecommerce"]
      interval: 30s
      timeout: 10s
      retries: 3

  # Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
  redis:
    image: redis:7-alpine
    container_name: e-commerce-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - ecommerce-network
    command: redis-server --appendonly yes
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 30s
      timeout: 10s
      retries: 3

  # Zookeeper –¥–ª—è Kafka
  zookeeper:
    image: confluentinc/cp-zookeeper:7.4.0
    container_name: e-commerce-zookeeper
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
      ZOOKEEPER_TICK_TIME: 2000
    networks:
      - ecommerce-network

  # Apache Kafka
  kafka:
    image: confluentinc/cp-kafka:7.4.0
    container_name: e-commerce-kafka
    depends_on:
      - zookeeper
    ports:
      - "9092:9092"
      - "9093:9093"
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_INTERNAL:PLAINTEXT
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092,PLAINTEXT_INTERNAL://kafka:29092
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
      KAFKA_TRANSACTION_STATE_LOG_MIN_ISR: 1
      KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: 1
      KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS: 0
      KAFKA_JMX_PORT: 9101
      KAFKA_JMX_HOSTNAME: localhost
    networks:
      - ecommerce-network
    healthcheck:
      test: ["CMD", "/opt/confluent/bin/kafka-broker-api-versions.sh", "--bootstrap-server", "localhost:9092"]
      interval: 30s
      timeout: 10s
      retries: 3

  # Sales Service
  sales-service:
    build:
      context: ../services/sales-service
      dockerfile: Dockerfile
    container_name: e-commerce-sales
    depends_on:
      postgres:
        condition: service_healthy
      kafka:
        condition: service_healthy
      redis:
        condition: service_healthy
    ports:
      - "8001:8000"
    environment:
      - DATABASE_URL=postgresql://ecommerce_user:ecommerce_pass@postgres:5432/ecommerce
      - REDIS_URL=redis://redis:6379
      - KAFKA_BOOTSTRAP_SERVERS=kafka:29092
      - SERVICE_NAME=sales-service
    networks:
      - ecommerce-network
    volumes:
      - ../services/sales-service/src:/home/app/src
    develop:
      watch:
        - action: sync
          path: ../services/sales-service/src
          target: /home/app/src

  # Inventory Service
  inventory-service:
    build:
      context: ../services/inventory-service
      dockerfile: Dockerfile
    container_name: e-commerce-inventory
    depends_on:
      postgres:
        condition: service_healthy
      kafka:
        condition: service_healthy
    ports:
      - "8002:8000"
    environment:
      - DATABASE_URL=postgresql://ecommerce_user:ecommerce_pass@postgres:5432/ecommerce
      - KAFKA_BOOTSTRAP_SERVERS=kafka:29092
      - SERVICE_NAME=inventory-service
    networks:
      - ecommerce-network
    volumes:
      - ../services/inventory-service/src:/home/app/src

  # Payment Service
  payment-service:
    build:
      context: ../services/payment-service
      dockerfile: Dockerfile
    container_name: e-commerce-payment
    depends_on:
      postgres:
        condition: service_healthy
      kafka:
        condition: service_healthy
    ports:
      - "8003:8000"
    environment:
      - DATABASE_URL=postgresql://ecommerce_user:ecommerce_pass@postgres:5432/ecommerce
      - KAFKA_BOOTSTRAP_SERVERS=kafka:29092
      - SERVICE_NAME=payment-service
      - PAYMENT_GATEWAY_URL=https://api.payment-gateway.com
      - PAYMENT_GATEWAY_KEY=${PAYMENT_GATEWAY_KEY}
    networks:
      - ecommerce-network
    volumes:
      - ../services/payment-service/src:/home/app/src

  # API Gateway
  api-gateway:
    image: nginx:alpine
    container_name: e-commerce-api-gateway
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - sales-service
      - inventory-service
      - payment-service
    networks:
      - ecommerce-network

volumes:
  postgres_data:
  redis_data:

networks:
  ecommerce-network:
    driver: bridge
```

### üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# üìÑ docker/.env
# Database
POSTGRES_DB=ecommerce
POSTGRES_USER=ecommerce_user
POSTGRES_PASSWORD=ecommerce_pass

# Redis
REDIS_URL=redis://localhost:6379

# Kafka
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# Services
SALES_SERVICE_URL=http://localhost:8001
INVENTORY_SERVICE_URL=http://localhost:8002
PAYMENT_SERVICE_URL=http://localhost:8003

# External APIs
PAYMENT_GATEWAY_URL=https://api.payment-gateway.com
PAYMENT_GATEWAY_KEY=your-secret-key

# Monitoring
PROMETHEUS_URL=http://localhost:9090
GRAFANA_URL=http://localhost:3000

# Security
JWT_SECRET_KEY=your-super-secret-jwt-key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json
```

## üêò PostgreSQL –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### üìÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```sql
-- üìÑ infrastructure/init-db.sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE DATABASE ecommerce;
CREATE USER ecommerce_user WITH PASSWORD 'ecommerce_pass';
GRANT ALL PRIVILEGES ON DATABASE ecommerce TO ecommerce_user;

-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
\c ecommerce;

-- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º –¥–ª—è —Ä–∞–∑–Ω—ã—Ö bounded contexts
CREATE SCHEMA common;
CREATE SCHEMA sales;
CREATE SCHEMA inventory;
CREATE SCHEMA payment;
CREATE SCHEMA shipping;
CREATE SCHEMA customer;

-- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤
GRANT USAGE ON SCHEMA common TO ecommerce_user;
GRANT USAGE ON SCHEMA sales TO ecommerce_user;
GRANT USAGE ON SCHEMA inventory TO ecommerce_user;
GRANT USAGE ON SCHEMA payment TO ecommerce_user;
GRANT USAGE ON SCHEMA shipping TO ecommerce_user;
GRANT USAGE ON SCHEMA customer TO ecommerce_user;

-- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—â–∏—Ö —Ç–∏–ø–æ–≤
CREATE TYPE order_status AS ENUM ('pending', 'confirmed', 'paid', 'shipped', 'delivered', 'cancelled');
CREATE TYPE payment_status AS ENUM ('pending', 'processing', 'completed', 'failed', 'refunded');
CREATE TYPE shipping_status AS ENUM ('pending', 'processing', 'shipped', 'delivered', 'returned');

-- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—â–∏—Ö —Ç–∞–±–ª–∏—Ü
CREATE TABLE common.products (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    currency VARCHAR(3) DEFAULT 'RUB',
    category VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE common.customers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    loyalty_points INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX idx_products_category ON common.products(category);
CREATE INDEX idx_products_active ON common.products(is_active);
CREATE INDEX idx_customers_email ON common.customers(email);
CREATE INDEX idx_customers_active ON common.customers(is_active);
```

### üèóÔ∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```python
# üìÑ infrastructure/migrations/env.py
from logging.config import fileConfig
from sqlalchemy import engine_from_config, pool
from alembic import context
from src.infrastructure.database import Base

# this is the Alembic Config object
config = context.config

# Interpret the config file for Python logging
if config.config_file_name is not None:
    fileConfig(config.config_file_name)

# add your model's MetaData object here
target_metadata = Base.metadata

def run_migrations_offline():
    """Run migrations in 'offline' mode."""
    url = config.get_main_option("sqlalchemy.url")
    context.configure(
        url=url,
        target_metadata=target_metadata,
        literal_binds=True,
        dialect_opts={"paramstyle": "named"},
    )

    with context.begin_transaction():
        context.run_migrations()

def run_migrations_online():
    """Run migrations in 'online' mode."""
    connectable = engine_from_config(
        config.get_section(config.config_file_name),
        prefix="sqlalchemy.",
        poolclass=pool.NullPool,
    )

    with connectable.connect() as connection:
        context.configure(
            connection=connection, target_metadata=target_metadata
        )

        with context.begin_transaction():
            context.run_migrations()

if context.is_offline_mode():
    run_migrations_offline()
else:
    run_migrations_online()
```

## üì® Apache Kafka –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### üéØ –ó–∞—á–µ–º Kafka?

Kafka –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **Event-driven architecture** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- **Scalability** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Å–æ–±—ã—Ç–∏–π
- **Reliability** - –≥–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **Decoupling** - —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
- **Replay capability** - –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

### üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–ø–∏–∫–æ–≤

```bash
# üìÑ infrastructure/kafka-setup.sh
#!/bin/bash

# –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ Kafka
sleep 30

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤ –¥–ª—è domain events
kafka-topics --create --topic order-events --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1
kafka-topics --create --topic payment-events --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1
kafka-topics --create --topic inventory-events --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1
kafka-topics --create --topic shipping-events --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1
kafka-topics --create --topic customer-events --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤ –¥–ª—è –∫–æ–º–∞–Ω–¥
kafka-topics --create --topic order-commands --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1
kafka-topics --create --topic payment-commands --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
kafka-topics --create --topic saga-events --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1
kafka-topics --create --topic notification-events --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1

echo "Kafka topics created successfully"
```

### üîß Event Store –Ω–∞ –±–∞–∑–µ Kafka

```python
# üìÑ services/sales-service/src/infrastructure/event_store.py
import json
from typing import List, Optional
from datetime import datetime
from aiokafka import AIOKafkaProducer, AIOKafkaConsumer
from domain.events import DomainEvent

class KafkaEventStore:
    """Event Store –Ω–∞ –±–∞–∑–µ Apache Kafka"""

    def __init__(self, bootstrap_servers: str):
        self.bootstrap_servers = bootstrap_servers
        self.producer: Optional[AIOKafkaProducer] = None

    async def start(self):
        """–ó–∞–ø—É—Å–∫ producer"""
        self.producer = AIOKafkaProducer(
            bootstrap_servers=self.bootstrap_servers,
            value_serializer=lambda v: json.dumps(v, default=str).encode('utf-8')
        )
        await self.producer.start()

    async def stop(self):
        """–û—Å—Ç–∞–Ω–æ–≤–∫–∞ producer"""
        if self.producer:
            await self.producer.stop()

    async def save_event(self, event: DomainEvent, topic: str) -> None:
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ Kafka"""
        event_data = {
            "event_id": event.event_id,
            "aggregate_id": event.aggregate_id,
            "event_type": event.__class__.__name__,
            "event_data": event.__dict__,
            "occurred_at": event.occurred_at.isoformat(),
            "event_version": event.event_version
        }

        await self.producer.send_and_wait(
            topic=topic,
            value=event_data,
            key=event.aggregate_id.encode('utf-8')
        )

    async def get_events_for_aggregate(self, aggregate_id: str, topic: str) -> List[DomainEvent]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–∞"""
        consumer = AIOKafkaConsumer(
            topic,
            bootstrap_servers=self.bootstrap_servers,
            group_id=f"event-store-{aggregate_id}",
            auto_offset_reset='earliest',
            value_deserializer=lambda v: json.loads(v.decode('utf-8'))
        )

        await consumer.start()

        events = []
        try:
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º
            async for message in consumer:
                if message.key.decode('utf-8') == aggregate_id:
                    event_data = message.value
                    # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ DomainEvent
                    # (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
                    events.append(event_data)
        finally:
            await consumer.stop()

        return events
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### üìä Prometheus –∏ Grafana

```yaml
# üìÑ docker/docker-compose.monitoring.yml
version: '3.8'

services:
  prometheus:
    image: prom/prometheus:latest
    container_name: e-commerce-prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml:ro
      - prometheus_data:/prometheus
    networks:
      - ecommerce-network

  grafana:
    image: grafana/grafana:latest
    container_name: e-commerce-grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    volumes:
      - grafana_data:/var/lib/grafana
    networks:
      - ecommerce-network

  node-exporter:
    image: prom/node-exporter:latest
    container_name: e-commerce-node-exporter
    ports:
      - "9100:9100"
    networks:
      - ecommerce-network

volumes:
  prometheus_data:
  grafana_data:
```

### üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus

```yaml
# üìÑ monitoring/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  # - "first_rules.yml"
  # - "second_rules.yml"

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']

  - job_name: 'sales-service'
    static_configs:
      - targets: ['sales-service:8000']
    # Optional: Add authentication if METRICS_AUTH_ENABLED=true
    # bearer_token: 'your-metrics-bearer-token-here'  # For bearer token auth
    # basic_auth:
    #   username: 'prometheus'
    #   password: 'secure-password-here'  # For basic auth

  - job_name: 'inventory-service'
    static_configs:
      - targets: ['inventory-service:8000']
    # Optional: Add authentication if METRICS_AUTH_ENABLED=true
    # bearer_token: 'your-metrics-bearer-token-here'
    # basic_auth:
    #   username: 'prometheus'
    #   password: 'secure-password-here'

  - job_name: 'payment-service'
    static_configs:
      - targets: ['payment-service:8000']
    # Optional: Add authentication if METRICS_AUTH_ENABLED=true
    # bearer_token: 'your-metrics-bearer-token-here'
    # basic_auth:
    #   username: 'prometheus'
    #   password: 'secure-password-here'

## üöÄ –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
docker-compose -f docker/docker-compose.yml up -d

# –ó–∞–ø—É—Å–∫ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
docker-compose -f docker/docker-compose.yml -f docker/docker-compose.monitoring.yml up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –û—á–∏—Å—Ç–∫–∞ volumes
docker-compose down -v
```

### üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL
docker exec -it e-commerce-postgres psql -U ecommerce_user -d ecommerce -c "SELECT version();"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
docker exec -it e-commerce-redis redis-cli ping

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Kafka
docker exec -it e-commerce-kafka kafka-topics --list --bootstrap-server localhost:9092

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8001/health
curl http://localhost:8002/health
curl http://localhost:8003/health
```

## üéÆ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

{{ create_exercise_form(
    "infrastructure_setup_exercise",
    "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤",
    "–°–æ–∑–¥–∞–π—Ç–µ docker-compose —Ñ–∞–π–ª—ã, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ PostgreSQL, Redis, Kafka –∏ API Gateway.",
    """# –ó–∞–¥–∞–Ω–∏–µ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## –®–∞–≥ 1: Docker Compose

–°–æ–∑–¥–∞–π—Ç–µ docker-compose.yml —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏:

1. **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
2. **Redis** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–µ—Å—Å–∏–∏
3. **Kafka + Zookeeper** - event streaming
4. **3 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞** - sales, inventory, payment
5. **API Gateway** - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

## –®–∞–≥ 2: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å:

1. **Database credentials**
2. **Redis connection**
3. **Kafka bootstrap servers**
4. **Service URLs**
5. **External API keys**
6. **Security settings**

## –®–∞–≥ 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î

–°–æ–∑–¥–∞–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è:

1. **–°–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ë–î**
2. **–°–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º** –¥–ª—è bounded contexts
3. **–°–æ–∑–¥–∞–Ω–∏—è –æ–±—â–∏—Ö —Ç–∞–±–ª–∏—Ü** (products, customers)
4. **–°–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kafka

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è:

1. **–°–æ–∑–¥–∞–Ω–∏—è —Ç–æ–ø–∏–∫–æ–≤** –¥–ª—è domain events
2. **–°–æ–∑–¥–∞–Ω–∏—è —Ç–æ–ø–∏–∫–æ–≤** –¥–ª—è –∫–æ–º–∞–Ω–¥
3. **–°–æ–∑–¥–∞–Ω–∏—è —Ç–æ–ø–∏–∫–æ–≤** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

## –®–∞–≥ 5: API Gateway

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –∫–∞–∫ API Gateway:

1. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–∏—Å–∞–º
2. **Load balancing** –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
3. **Rate limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
4. **CORS headers** –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–æ–≤

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

1. **docker-compose.yml** - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
2. **.env** - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. **init-db.sql** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
4. **kafka-setup.sh** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Kafka
5. **nginx.conf** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API Gateway
6. **Dockerfile** - –¥–ª—è Python —Å–µ—Ä–≤–∏—Å–æ–≤

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

- **Docker Compose**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ö–µ–º –∏ –∏–Ω–¥–µ–∫—Å–æ–≤
- **Kafka**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–ø–∏–∫–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **API Gateway**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ

---

*–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É!*""",
    [
        "–°–æ–∑–¥–∞—Ç—å docker-compose.yml —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏",
        "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è",
        "–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î",
        "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Kafka —Ç–æ–ø–∏–∫–∏",
        "–°–æ–∑–¥–∞—Ç—å Dockerfile –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤",
        "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å API Gateway"
    ]
) }}

## üß™ –ö–≤–∏–∑

<div class="quiz-container" id="infrastructure-quiz">
<script type="application/json">
  "title": "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞",
  "description": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ Docker, –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ message broker",
  "questions": [
    {
      "question": "–ó–∞—á–µ–º –Ω—É–∂–µ–Ω Docker –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö?",
      "type": "multiple",
      "points": 2,
      "options": [
        {"text": "–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è", "correct": true},
        {"text": "–ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤", "correct": true},
        {"text": "–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ", "correct": true},
        {"text": "–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏", "correct": false}
      ],
      "explanation": "Docker –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –∏–∑–æ–ª—è—Ü–∏—é –∏ –±—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ"
    },
    {
      "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ health check –≤ Docker?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞", "correct": true},
        {"text": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "correct": false},
        {"text": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏", "correct": false}
      ],
      "explanation": "Health check –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫ —Ä–∞–±–æ—Ç–µ"
    },
    {
      "question": "–ó–∞—á–µ–º –Ω—É–∂–µ–Ω Apache Kafka?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–î–ª—è event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã", "correct": true},
        {"text": "–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤", "correct": false},
        {"text": "–î–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö", "correct": false}
      ],
      "explanation": "Kafka –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –≤ event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ"
    }
  ]
</script>
</div>

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

!!! success "–ß—Ç–æ –≤—ã —É–∑–Ω–∞–ª–∏"
    - ‚úÖ –ö–∞–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
    - ‚úÖ –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å PostgreSQL –∏ Redis –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    - ‚úÖ –ö–∞–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Apache Kafka –¥–ª—è event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
    - ‚úÖ –ö–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å docker-compose —Ñ–∞–π–ª—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

!!! tip "–ü—Ä–∞–∫—Ç–∏–∫–∞"
    –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π docker-compose —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ë–î). –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∑–∞–∫—Ä–µ–ø–∏—Ç—å –∑–Ω–∞–Ω–∏—è.

–¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ **[Domain Modeling](03-domain-modeling.md)** - —Å–æ–∑–¥–∞–Ω–∏—é –¥–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DDD –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤!

---













