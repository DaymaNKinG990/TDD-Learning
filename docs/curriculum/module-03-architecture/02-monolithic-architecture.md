# üèõ –£—Ä–æ–∫ 2: –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üéØ –¶–µ–ª–∏ —É—Ä–æ–∫–∞

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ:
- ‚úÖ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- ‚úÖ –ü–æ–Ω–∏–º–∞—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–Ω–æ–ª–∏—Ç –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º

## üìñ –ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞?

!!! quote "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–∞"
    **–ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å.

### üí° –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

**–ê–Ω–∞–ª–æ–≥–∏—è**: –û–¥–∏–Ω –±–æ–ª—å—à–æ–π –¥–æ–º
- –í—Å–µ –∫–æ–º–Ω–∞—Ç—ã (–º–æ–¥—É–ª–∏) –≤ –æ–¥–Ω–æ–º –∑–¥–∞–Ω–∏–∏
- –û–¥–Ω–∞ –≤—Ö–æ–¥–Ω–∞—è –¥–≤–µ—Ä—å (–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å)
- –û–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏—è (–æ–¥–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- –õ–µ–≥–∫–æ –ø–µ—Ä–µ–π—Ç–∏ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã –≤ –∫–æ–º–Ω–∞—Ç—É (–±—ã—Å—Ç—Ä—ã–µ –≤—ã–∑–æ–≤—ã)
- –ù–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å—Å—è - –Ω—É–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å—å –¥–æ–º –∑–∞–Ω–æ–≤–æ

**–í –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏:**
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –û–¥–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ–≥–æ
- –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (–æ–¥–∏–Ω —Ñ–∞–π–ª)
- –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è MVP

### üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–Ω–æ–ª–∏—Ç–∞

```mermaid
graph TB
    A[–ú–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ] --> B[UI Layer<br/>Frontend]
    A --> C[Business Logic<br/>Services]
    A --> D[Data Layer<br/>Database]
    
    B --> E[–í—Å–µ –≤ –æ–¥–Ω–æ–º<br/>–ø—Ä–æ—Ü–µ—Å—Å–µ]
    C --> E
    D --> E
    
    E --> F[–ü—Ä–æ—Å—Ç–æ–µ<br/>—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ]
    
    style A fill:#51cf66
    style E fill:#ffd43b
    style F fill:#74c0fc
```

### –ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

1. **–ï–¥–∏–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –æ–¥–Ω–æ–º codebase
2. **–ï–¥–∏–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –æ–±—â–∞—è –ë–î –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. **–ï–¥–∏–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ
4. **–ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –æ–¥–∏–Ω –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –¢–∏–ø–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
üìÅ monolithic-app/
‚îú‚îÄ‚îÄ üìÅ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ models/          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ controllers/     # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ repositories/    # –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ middleware/      # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ utils/          # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ config/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÅ tests/
‚îú‚îÄ‚îÄ üìÅ migrations/
‚îú‚îÄ‚îÄ üìÅ docs/
‚îî‚îÄ‚îÄ üìÅ scripts/
```

### –ü—Ä–∏–º–µ—Ä –Ω–∞ Python (FastAPI)

```python
# models.py
from pydantic import BaseModel
from sqlalchemy import Column, Integer, String, DateTime
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class User(Base):
    __tablename__ = "users"

    id = Column(Integer, primary_key=True, index=True)
    email = Column(String, unique=True, index=True)
    username = Column(String, unique=True, index=True)
    hashed_password = Column(String)
    created_at = Column(DateTime)

class UserCreate(BaseModel):
    email: str
    username: str
    password: str

class UserResponse(BaseModel):
    id: int
    email: str
    username: str
    created_at: str
```

```python
# repositories/user_repository.py
from sqlalchemy.orm import Session
from models import User, UserCreate
from typing import Optional, List

class UserRepository:
    def __init__(self, db: Session):
        self.db = db

    def create_user(self, user: UserCreate) -> User:
        hashed_password = self._hash_password(user.password)
        db_user = User(
            email=user.email,
            username=user.username,
            hashed_password=hashed_password
        )
        self.db.add(db_user)
        self.db.commit()
        self.db.refresh(db_user)
        return db_user

    def get_user_by_id(self, user_id: int) -> Optional[User]:
        return self.db.query(User).filter(User.id == user_id).first()

    def get_user_by_email(self, email: str) -> Optional[User]:
        return self.db.query(User).filter(User.email == email).first()

    def get_user_by_username(self, username: str) -> Optional[User]:
        return self.db.query(User).filter(User.username == username).first()

    def get_all_users(self, skip: int = 0, limit: int = 100) -> List[User]:
        return self.db.query(User).offset(skip).limit(limit).all()

    def _hash_password(self, password: str) -> str:
        # –†–µ–∞–ª—å–Ω–∞—è —Ö—ç—à–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è
        return f"hashed_{password}"
```

```python
# services/user_service.py
from repositories.user_repository import UserRepository
from models import User, UserCreate
from typing import Optional, List
import smtplib

class UserService:
    def __init__(self, user_repo: UserRepository, email_service):
        self.user_repo = user_repo
        self.email_service = email_service

    def register_user(self, user_data: UserCreate) -> User:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if self.user_repo.get_user_by_email(user_data.email):
            raise ValueError("User with this email already exists")

        if self.user_repo.get_user_by_username(user_data.username):
            raise ValueError("Username already taken")

        # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user = self.user_repo.create_user(user_data)

        # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ email
        self.email_service.send_welcome_email(user.email, user.username)

        return user

    def get_user_profile(self, user_id: int) -> Optional[User]:
        return self.user_repo.get_user_by_id(user_id)

    def get_all_users(self, page: int = 1, per_page: int = 20) -> List[User]:
        skip = (page - 1) * per_page
        return self.user_repo.get_all_users(skip=skip, limit=per_page)
```

```python
# infrastructure/email_service.py
class EmailService:
    """Service for sending emails - infrastructure layer component."""
    
    def send_welcome_email(self, email: str, username: str) -> None:
        # Implementation would send actual email via SMTP or email service
        print(f"Sending welcome email to {email} for user {username}")
        # In production: smtp.send_email(...)
```

```python
# controllers/user_controller.py
from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy.orm import Session
from services.user_service import UserService
from repositories.user_repository import UserRepository
from infrastructure.email_service import EmailService
from models import UserCreate, UserResponse
from typing import List

router = APIRouter()

def get_db():
    # Dependency –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –ë–î
    pass

def get_user_service(db: Session = Depends(get_db)):
    user_repo = UserRepository(db)
    email_service = EmailService()
    return UserService(user_repo, email_service)

@router.post("/users/", response_model=UserResponse)
async def create_user(
    user: UserCreate,
    user_service: UserService = Depends(get_user_service)
):
    try:
        db_user = user_service.register_user(user)
        return UserResponse(
            id=db_user.id,
            email=db_user.email,
            username=db_user.username,
            created_at=db_user.created_at.isoformat()
        )
    except ValueError as e:
        raise HTTPException(status_code=400, detail=str(e))

@router.get("/users/", response_model=List[UserResponse])
async def get_users(
    page: int = 1,
    per_page: int = 20,
    user_service: UserService = Depends(get_user_service)
):
    users = user_service.get_all_users(page=page, per_page=per_page)
    return [
        UserResponse(
            id=user.id,
            email=user.email,
            username=user.username,
            created_at=user.created_at.isoformat()
        )
        for user in users
    ]
```

## üé® –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**

```python
# ‚ùå –ü–ª–æ—Ö–æ: –í—Å–µ –≤ –æ–¥–Ω–æ–º –∫–ª–∞—Å—Å–µ
class UserManager:
    def create_user(self, user_data):
        # –í–∞–ª–∏–¥–∞—Ü–∏—è
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
        # –û—Ç–ø—Ä–∞–≤–∫–∞ email
        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        pass

# ‚úÖ –•–æ—Ä–æ—à–æ: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏
class UserController:
    def create_user(self, request):
        # –¢–æ–ª—å–∫–æ HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞
        pass

class UserService:
    def create_user(self, user_data):
        # –¢–æ–ª—å–∫–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
        pass

class UserRepository:
    def save(self, user):
        # –¢–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
        pass
```

### 2. **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º**

```
üìÅ src/
‚îú‚îÄ‚îÄ üìÅ user_management/
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ models.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ service.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ repository.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ controller.py
‚îú‚îÄ‚îÄ üìÅ product_catalog/
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ models.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ service.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ repository.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ controller.py
‚îî‚îÄ‚îÄ üìÅ order_processing/
    ‚îú‚îÄ‚îÄ üìÑ models.py
    ‚îú‚îÄ‚îÄ üìÑ service.py
    ‚îú‚îÄ‚îÄ üìÑ repository.py
    ‚îî‚îÄ‚îÄ üìÑ controller.py
```

### 3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**

```python
# Repository Pattern
class OrderRepository:
    def save(self, order):
        pass

    def find_by_id(self, order_id):
        pass

    def find_by_user(self, user_id):
        pass

# Service Layer Pattern
class OrderService:
    def __init__(self, order_repo, payment_service, notification_service):
        self.order_repo = order_repo
        self.payment_service = payment_service
        self.notification_service = notification_service

    def place_order(self, order_data):
        # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
        pass

# Dependency Injection
class OrderController:
    def __init__(self, order_service):
        self.order_service = order_service
```

### 4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

```python
# –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
from fastapi import HTTPException, Request
from fastapi.responses import JSONResponse

@app.exception_handler(ValueError)
async def value_error_handler(request: Request, exc: ValueError):
    return JSONResponse(
        status_code=400,
        content={"error": str(exc)}
    )

@app.exception_handler(Exception)
async def general_error_handler(request: Request, exc: Exception):
    return JSONResponse(
        status_code=500,
        content={"error": "Internal server error"}
    )

# –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
class UserNotFoundError(Exception):
    pass

class InsufficientFundsError(Exception):
    pass

class OrderService:
    def get_user_orders(self, user_id):
        user = self.user_repo.get_by_id(user_id)
        if not user:
            raise UserNotFoundError(f"User {user_id} not found")
        return self.order_repo.find_by_user(user_id)
```

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**

```python
from functools import lru_cache
import redis
import json

class CacheService:
    def __init__(self):
        self.redis = redis.Redis()

    def get(self, key: str):
        data = self.redis.get(key)
        return json.loads(data) if data else None

    def set(self, key: str, value, ttl: int = 3600):
        self.redis.setex(key, ttl, json.dumps(value))

class ProductService:
    def __init__(self, product_repo, cache_service):
        self.product_repo = product_repo
        self.cache = cache_service

    @lru_cache(maxsize=100)
    def get_product(self, product_id: int):
        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
        return self.product_repo.find_by_id(product_id)

    def get_popular_products(self):
        cache_key = "popular_products"
        products = self.cache.get(cache_key)

        if not products:
            products = self.product_repo.find_popular()
            self.cache.set(cache_key, products, ttl=1800)  # 30 –º–∏–Ω—É—Ç

        return products
```

### 2. **Lazy Loading**

```python
# –ú–æ–¥–µ–ª—å —Å lazy loading
class Order:
    def __init__(self, order_id):
        self.order_id = order_id
        self._items = None
        self._user = None

    @property
    def items(self):
        if self._items is None:
            self._items = self._load_items()
        return self._items

    @property
    def user(self):
        if self._user is None:
            self._user = self._load_user()
        return self._user

    def _load_items(self):
        # –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏
        pass

    def _load_user(self):
        # –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏
        pass
```

### 3. **Connection Pooling**

```python
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
engine = create_engine(
    "postgresql://user:password@localhost/db",
    pool_size=10,        # –†–∞–∑–º–µ—Ä –ø—É–ª–∞
    max_overflow=20,     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ
    pool_timeout=30,     # –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è
    pool_recycle=3600    # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
)

SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)

def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()
```

### 4. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**

```python
import asyncio
from concurrent.futures import ThreadPoolExecutor
import aiohttp

class AsyncService:
    def __init__(self):
        self.executor = ThreadPoolExecutor(max_workers=4)

    async def process_heavy_task(self, data):
        # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—è–∂–µ–ª–æ–π –∑–∞–¥–∞—á–∏ –≤ –ø—É–ª–µ –ø–æ—Ç–æ–∫–æ–≤
        loop = asyncio.get_event_loop()
        return await loop.run_in_executor(
            self.executor,
            self._heavy_computation,
            data
        )

    def _heavy_computation(self, data):
        # –¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        return sum(i * i for i in range(data))

    async def fetch_external_data(self, url):
        async with aiohttp.ClientSession() as session:
            async with session.get(url) as response:
                return await response.json()
```

## üîß –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–∞

### 1. **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**

```python
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
# - CPU cores
# - RAM
# - Disk I/O
# - Network bandwidth
```

### 2. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**

```python
# Load Balancer + Multiple Instances
# Nginx, HAProxy, AWS ELB

upstream backend {
    server 127.0.0.1:8001;
    server 127.0.0.1:8002;
    server 127.0.0.1:8003;
}

server {
    listen 80;
    location / {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 3. **Database Scaling**

```sql
-- Read Replicas
-- Master-Slave replication
-- Connection pooling
-- Query optimization
-- Indexing strategy
```

### 4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

```python
# Multi-level caching strategy
class CacheManager:
    def __init__(self):
        self.l1_cache = {}  # In-memory (fastest)
        self.l2_cache = RedisCache()  # Redis (fast)
        self.l3_cache = DatabaseCache()  # Database (slowest)

    def get(self, key):
        # L1 Cache
        if key in self.l1_cache:
            return self.l1_cache[key]

        # L2 Cache
        value = self.l2_cache.get(key)
        if value:
            self.l1_cache[key] = value  # Promote to L1
            return value

        # L3 Cache (Database)
        value = self.l3_cache.get(key)
        if value:
            self.l2_cache.set(key, value)  # Promote to L2
            self.l1_cache[key] = value     # Promote to L1

        return value
```

## üö® –ö–æ–≥–¥–∞ –º–æ–Ω–æ–ª–∏—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π?

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

1. **–î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** (> 30 –º–∏–Ω—É—Ç)
2. **–ß–∞—Å—Ç—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ —Å–ª–∏—è–Ω–∏–∏** (> 5 –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ –¥–µ–Ω—å)
3. **–ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º** –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
5. **–†–∞–∑–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è** –∫ —Ä–∞–∑–Ω—ã–º —á–∞—Å—Ç—è–º —Å–∏—Å—Ç–µ–º—ã
6. **–ö–æ–º–∞–Ω–¥–∞ > 20 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏

```python
class MonolithHealthMetrics:
    @staticmethod
    def deployment_frequency():
        """–ß–∞—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π"""
        # –ò–¥–µ–∞–ª—å–Ω–æ: –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å
        # –ü—Ä–æ–±–ª–µ–º–∞: —Ä–µ–∂–µ —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é
        pass

    @staticmethod
    def lead_time_for_changes():
        """–í—Ä–µ–º—è –æ—Ç –∫–æ–º–º–∏—Ç–∞ –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞"""
        # –ò–¥–µ–∞–ª—å–Ω–æ: < 1 —á–∞—Å–∞
        # –ü—Ä–æ–±–ª–µ–º–∞: > 1 –¥–Ω—è
        pass

    @staticmethod
    def change_failure_rate():
        """–ü—Ä–æ—Ü–µ–Ω—Ç –Ω–µ—É–¥–∞—á–Ω—ã—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π"""
        # –ò–¥–µ–∞–ª—å–Ω–æ: < 5%
        # –ü—Ä–æ–±–ª–µ–º–∞: > 20%
        pass

    @staticmethod
    def team_size_vs_productivity():
        """–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã"""
        # –ò–¥–µ–∞–ª—å–Ω–æ: —Ä–∞—Å—Ç–µ—Ç –ª–∏–Ω–µ–π–Ω–æ
        # –ü—Ä–æ–±–ª–µ–º–∞: –ø–∞–¥–∞–µ—Ç —Å —Ä–æ—Å—Ç–æ–º –∫–æ–º–∞–Ω–¥—ã
        pass
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –î–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤ –∏ MVP
‚úÖ **–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫** - –Ω–µ–¥–µ–ª–∏ –≤–º–µ—Å—Ç–æ –º–µ—Å—è—Ü–µ–≤  
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –æ–¥–∏–Ω codebase, –æ–¥–Ω–∞ –ë–î  
‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏  
‚úÖ **–õ–µ–≥–∫–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –Ω–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤  

### –î–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –∫–æ–º–∞–Ω–¥
‚úÖ **–ú–µ–Ω—å—à–µ overhead** - –Ω–µ—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã  
‚úÖ **–õ–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å** - –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å  
‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –Ω–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤  
‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –æ–±—É—á–µ–Ω–∏–µ** - –º–µ–Ω—å—à–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π  

### –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –¥–æ–º–µ–Ω–æ–≤
‚úÖ **–Ø—Å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - –≤—Å–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ  
‚úÖ **–õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å** - –º–µ–Ω—å—à–µ moving parts  
‚úÖ **–ë—ã—Å—Ç—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –Ω–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏  

## üéÆ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–∞

**–ó–∞–¥–∞–Ω–∏–µ:** –°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏.

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ó–∞–¥–∞–Ω–∏–µ:** –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

1. **–ú–æ–Ω–æ–ª–∏—Ç - –æ—Ç–ª–∏—á–Ω–∞—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Ç–æ—á–∫–∞** –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
2. **–•–æ—Ä–æ—à–∏–π –º–æ–Ω–æ–ª–∏—Ç** –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–∞** –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–æ –∏–º–µ–µ—Ç –ø—Ä–µ–¥–µ–ª—ã
4. **–ú–æ–Ω–æ–ª–∏—Ç vs –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** - —ç—Ç–æ –Ω–µ –±–∏–Ω–∞—Ä–Ω—ã–π –≤—ã–±–æ—Ä
5. **–ú–∏–≥—Ä–∞—Ü–∏—è** —Å –º–æ–Ω–æ–ª–∏—Ç–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

!!! success "–ß—Ç–æ –≤—ã —É–∑–Ω–∞–ª–∏"
    - ‚úÖ –ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–≥–¥–∞ –µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
    - ‚úÖ –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    - ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
    - ‚úÖ –ö–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –æ—Ç –º–æ–Ω–æ–ª–∏—Ç–∞ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º

!!! tip "–ü—Ä–∞–∫—Ç–∏–∫–∞"
    –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, TODO-–ª–∏—Å—Ç) —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Å–ª–æ–µ–≤. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å –æ—Å–Ω–æ–≤—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞.

–¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã –∏–∑—É—á–∏—Ç—å **[–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É](03-microservices-architecture.md)** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º!

---

!!! tip "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç"
    –î–∞–∂–µ –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –Ω–∞—á–Ω–∏—Ç–µ —Å —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–æ–Ω–æ–ª–∏—Ç–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–µ–µ –ø–æ–ª—É—á–∏—Ç—å feedback –∏ –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –¥–æ–º–µ–Ω.

!!! info "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã"
    - [Building Microservices by Sam Newman](https://samnewman.io/books/building_microservices/)
    - [Clean Architecture by Robert Martin](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)

## üß™ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è: –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

<div class="quiz-container" id="monolithic-architecture-quiz">
<script type="application/json">
{
  "title": "–ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞",
  "description": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ",
  "icon": "üèõÔ∏è",
  "questions": [
    {
      "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Å–æ—Å—Ç–æ—è—â–µ–µ –∏–∑ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤", "correct": false},
        {"text": "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≥–¥–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ", "correct": true},
        {"text": "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ", "correct": false},
        {"text": "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö", "correct": false}
      ],
      "explanation": "–ú–æ–Ω–æ–ª–∏—Ç - —ç—Ç–æ –µ–¥–∏–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –≤ –æ–¥–Ω–æ–º codebase"
    },
    {
      "question": "–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:",
      "type": "multiple",
      "points": 2,
      "options": [
        {"text": "–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è", "correct": true},
        {"text": "–õ–µ–≥–∫–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏", "correct": true},
        {"text": "–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö", "correct": true},
        {"text": "–í—ã—Å–æ–∫–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å", "correct": false},
        {"text": "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥–∏–±–∫–æ—Å—Ç—å", "correct": false}
      ],
      "explanation": "–ú–æ–Ω–æ–ª–∏—Ç –ø—Ä–æ—Å—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏, –Ω–æ –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏"
    },
    {
      "question": "–ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?",
      "type": "multiple",
      "points": 2,
      "options": [
        {"text": "–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤)", "correct": true},
        {"text": "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤)", "correct": true},
        {"text": "Read replicas –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö", "correct": true},
        {"text": "–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã", "correct": false},
        {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π", "correct": false}
      ],
      "explanation": "–ú–æ–Ω–æ–ª–∏—Ç –º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å, –Ω–æ –µ—Å—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–µ–ª—ã"
    },
    {
      "question": "–ü—Ä–∏–∑–Ω–∞–∫–∏ —Ç–æ–≥–æ, —á—Ç–æ –º–æ–Ω–æ–ª–∏—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π:",
      "type": "multiple",
      "points": 2,
      "options": [
        {"text": "–î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è", "correct": true},
        {"text": "–ß–∞—Å—Ç—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ —Å–ª–∏—è–Ω–∏–∏ –∫–æ–¥–∞", "correct": true},
        {"text": "–ö–æ–º–∞–Ω–¥–∞ –±–æ–ª—å—à–µ 20 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤", "correct": true},
        {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π", "correct": false},
        {"text": "–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞", "correct": false}
      ],
      "explanation": "–≠—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã"
    },
    {
      "question": "–ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–æ–¥ –≤ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–í—Å–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ", "correct": false},
        {"text": "–ü–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º (services, controllers, models)", "correct": true},
        {"text": "–ü–æ –∞–ª—Ñ–∞–≤–∏—Ç—É", "correct": false},
        {"text": "–°–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º", "correct": false}
      ],
      "explanation": "–•–æ—Ä–æ—à–∏–π –º–æ–Ω–æ–ª–∏—Ç –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∫–æ–¥–∞ –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—è–º"
    },
    {
      "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ 'Repository Pattern' –≤ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–°–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –≤ Git", "correct": false},
        {"text": "–ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º", "correct": true},
        {"text": "–ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ Docker", "correct": false},
        {"text": "–°–ø–æ—Å–æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã", "correct": false}
      ],
      "explanation": "Repository Pattern –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏"
    },
    {
      "question": "–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?",
      "type": "multiple",
      "points": 2,
      "options": [
        {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è", "correct": true},
        {"text": "Connection pooling –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö", "correct": true},
        {"text": "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞", "correct": true},
        {"text": "–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã", "correct": false},
        {"text": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è", "correct": false}
      ],
      "explanation": "–ú–æ–Ω–æ–ª–∏—Ç –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏"
    },
    {
      "question": "–ö–æ–≥–¥–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - –ª—É—á—à–∏–π –≤—ã–±–æ—Ä?",
      "type": "single",
      "points": 1,
      "options": [
        {"text": "–î–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤ –∏ MVP", "correct": true},
        {"text": "–î–ª—è —Å–∏—Å—Ç–µ–º —Å –º–∏–ª–ª–∏–æ–Ω–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π", "correct": false},
        {"text": "–î–ª—è –∫–æ–º–∞–Ω–¥ –∏–∑ 100+ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤", "correct": false},
        {"text": "–î–ª—è —Å–∏—Å—Ç–µ–º —Å –∂–µ—Å—Ç–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ latency", "correct": false}
      ],
      "explanation": "–ú–æ–Ω–æ–ª–∏—Ç –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –∏ MVP –ø—Ä–æ–µ–∫—Ç–æ–≤"
    }
  ]
}
</script>
</div>

## üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

{{ create_exercise_form(
    "monolithic_design",
    "–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º",
    "–°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (CMS) —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å—é –∫ –±—É–¥—É—â–µ–º—É –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é.",
    """# –ó–∞–¥–∞–Ω–∏–µ: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ CMS

–°–æ–∑–¥–∞–π—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏:

## –ë–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º**: –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–µ–≥–∏**: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ä–æ–ª–∏ (–∞–¥–º–∏–Ω, —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∞–≤—Ç–æ—Ä)
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**: –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ —Å—Ç–∞—Ç—å—è–º
- **SEO**: –ú–µ—Ç–∞—Ç–µ–≥–∏, URL slugs, sitemap
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ü—Ä–æ—Å–º–æ—Ç—Ä—ã, –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç–µ–π

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **–Ø–∑—ã–∫**: Python + FastAPI
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis
- **–ü–æ–∏—Å–∫**: Elasticsearch (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–§–∞–π–ª—ã**: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–ª–∏ S3
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π coverage
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è API docs

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```
üìÅ cms-monolith/
‚îú‚îÄ‚îÄ üìÅ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ api/           # HTTP API —Å–ª–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ core/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ infrastructure/ # –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ domain/        # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ shared/        # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ üìÅ tests/
‚îú‚îÄ‚îÄ üìÅ migrations/
‚îî‚îÄ‚îÄ üìÅ docs/
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
2. **Domain-Driven Design** - –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞
3. **Clean Architecture** - –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
4. **Repository Pattern** - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
5. **CQRS Pattern** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ó–∞–¥–∞—á–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Domain Models)

```python
# TODO: –°–æ–∑–¥–∞–π—Ç–µ –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
class Article:
    '''–î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å—Ç–∞—Ç—å–∏'''
    def __init__(self, title: str, content: str, author_id: int):
        self.id: Optional[int] = None
        self.title = title
        self.content = content
        self.slug = self._generate_slug(title)
        self.author_id = author_id
        self.status = ArticleStatus.DRAFT
        self.created_at = datetime.utcnow()
        self.published_at: Optional[datetime] = None
        self.tags: List[Tag] = []
        self.category: Optional[Category] = None

    def publish(self) -> None:
        '''–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏'''
        if self.status != ArticleStatus.DRAFT:
            raise ValueError("Only draft articles can be published")

        self.status = ArticleStatus.PUBLISHED
        self.published_at = datetime.utcnow()

        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π (Event Sourcing)
        # TODO: –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

    def _generate_slug(self, title: str) -> str:
        '''–ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL-friendly slug'''
        # TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é slug
        pass

class User:
    '''–î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è'''
    def __init__(self, email: str, username: str):
        self.id: Optional[int] = None
        self.email = email
        self.username = username
        self.role = UserRole.AUTHOR
        self.is_active = True
        self.created_at = datetime.utcnow()

class Comment:
    '''–î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è'''
    def __init__(self, content: str, article_id: int, author_id: int):
        self.id: Optional[int] = None
        self.content = content
        self.article_id = article_id
        self.author_id = author_id
        self.created_at = datetime.utcnow()
        self.is_moderated = False

# TODO: –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è
class ArticleStatus:
    DRAFT = "draft"
    PUBLISHED = "published"
    ARCHIVED = "archived"

class UserRole:
    ADMIN = "admin"
    EDITOR = "editor"
    AUTHOR = "author"
```

### 2. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Repository Pattern)

```python
# TODO: –°–æ–∑–¥–∞–π—Ç–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
class IArticleRepository(ABC):
    @abstractmethod
    def save(self, article: Article) -> Article:
        pass

    @abstractmethod
    def find_by_id(self, article_id: int) -> Optional[Article]:
        pass

    @abstractmethod
    def find_by_author(self, author_id: int) -> List[Article]:
        pass

    @abstractmethod
    def find_published(self, page: int = 1, per_page: int = 20) -> List[Article]:
        pass

    @abstractmethod
    def search(self, query: str) -> List[Article]:
        pass

# TODO: –†–µ–∞–ª–∏–∑—É–π—Ç–µ SQLAlchemy —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
class SQLArticleRepository(IArticleRepository):
    def __init__(self, session: Session):
        self.session = session

    def save(self, article: Article) -> Article:
        # TODO: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ç—å—é –≤ –ë–î
        pass

    def find_by_id(self, article_id: int) -> Optional[Article]:
        # TODO: –ù–∞–π—Ç–∏ —Å—Ç–∞—Ç—å—é –ø–æ ID
        pass

    # TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

# TODO: –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è User –∏ Comment
```

### 3. –°–µ—Ä–≤–∏—Å—ã (Service Layer)

```python
# TODO: –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
class ArticleService:
    def __init__(self, article_repo: IArticleRepository, user_repo, event_publisher):
        self.article_repo = article_repo
        self.user_repo = user_repo
        self.event_publisher = event_publisher

    def create_article(self, title: str, content: str, author_id: int) -> Article:
        '''–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏'''
        # TODO: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
        # TODO: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
        # TODO: –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
        pass

    def publish_article(self, article_id: int, user_id: int) -> Article:
        '''–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—å–∏'''
        # TODO: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        # TODO: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å—Ç–∞—Ç—å–∏
        # TODO: –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
        pass

    def search_articles(self, query: str, page: int = 1) -> List[Article]:
        '''–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π'''
        # TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
        pass

class CommentService:
    def __init__(self, comment_repo, article_repo, moderation_service):
        self.comment_repo = comment_repo
        self.article_repo = article_repo
        self.moderation_service = moderation_service

    def add_comment(self, article_id: int, content: str, author_id: int) -> Comment:
        '''–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è'''
        # TODO: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏
        # TODO: –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        # TODO: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
        pass

# TODO: –°–æ–∑–¥–∞–π—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
```

### 4. API —Å–ª–æ–π (Controllers)

```python
# TODO: –°–æ–∑–¥–∞–π—Ç–µ FastAPI —Ä–æ—É—Ç–µ—Ä—ã
from fastapi import APIRouter, Depends, HTTPException, Query
from typing import List

router = APIRouter()

# TODO: –°–æ–∑–¥–∞–π—Ç–µ dependency injection
def get_article_service() -> ArticleService:
    # TODO: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    pass

@router.post("/articles/", response_model=ArticleResponse)
async def create_article(
    request: CreateArticleRequest,
    current_user: User = Depends(get_current_user),
    article_service: ArticleService = Depends(get_article_service)
):
    '''–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏'''
    try:
        article = article_service.create_article(
            title=request.title,
            content=request.content,
            author_id=current_user.id
        )
        return ArticleResponse.from_domain(article)
    except ValueError as e:
        raise HTTPException(status_code=400, detail=str(e))

@router.get("/articles/", response_model=List[ArticleSummary])
async def list_articles(
    page: int = Query(1, ge=1),
    per_page: int = Query(20, ge=1, le=100),
    search: Optional[str] = None,
    article_service: ArticleService = Depends(get_article_service)
):
    '''–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π'''
    if search:
        articles = article_service.search_articles(search, page)
    else:
        articles = article_service.get_published_articles(page, per_page)

    return [ArticleSummary.from_domain(article) for article in articles]

@router.put("/articles/{article_id}/publish")
async def publish_article(
    article_id: int,
    current_user: User = Depends(get_current_user),
    article_service: ArticleService = Depends(get_article_service)
):
    '''–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—å–∏'''
    # TODO: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –∏–ª–∏ –∞–¥–º–∏–Ω)
    # TODO: –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—å–∏
    pass

# TODO: –°–æ–∑–¥–∞–π—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```

### 5. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```python
# TODO: –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
from functools import lru_cache
import redis
from typing import Optional

class CacheService:
    def __init__(self):
        self.redis = redis.Redis()
        self.ttl = 3600  # 1 —á–∞—Å

    def get(self, key: str) -> Optional[str]:
        return self.redis.get(key)

    def set(self, key: str, value: str) -> None:
        self.redis.setex(key, self.ttl, value)

    def delete(self, key: str) -> None:
        self.redis.delete(key)

class CachedArticleService(ArticleService):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.cache = CacheService()

    @lru_cache(maxsize=100)
    def get_article_by_id(self, article_id: int) -> Optional[Article]:
        '''–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–µ–π –≤ –ø–∞–º—è—Ç–∏'''
        return super().get_article_by_id(article_id)

    def get_popular_articles(self) -> List[Article]:
        '''–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π –≤ Redis'''
        cache_key = "popular_articles"
        cached = self.cache.get(cache_key)

        if cached:
            # TODO: –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ JSON
            pass

        articles = super().get_popular_articles()

        # TODO: –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ JSON –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
        return articles

# TODO: –î–æ–±–∞–≤—å—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç—è–∂–µ–ª—ã—Ö –∑–∞–¥–∞—á
import asyncio
from concurrent.futures import ThreadPoolExecutor

class AsyncArticleService:
    def __init__(self):
        self.executor = ThreadPoolExecutor(max_workers=4)

    async def generate_seo_metadata(self, article: Article) -> Dict[str, str]:
        '''–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SEO –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö'''
        loop = asyncio.get_event_loop()
        return await loop.run_in_executor(
            self.executor,
            self._generate_metadata_sync,
            article
        )

    def _generate_metadata_sync(self, article: Article) -> Dict[str, str]:
        # TODO: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—Ç—è–∂–µ–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
        pass
```

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# TODO: –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç—ã
import pytest
from unittest.mock import Mock, MagicMock

class TestArticleService:
    def setup_method(self):
        self.mock_repo = Mock()
        self.mock_user_repo = Mock()
        self.mock_event_publisher = Mock()

        self.service = ArticleService(
            self.mock_repo,
            self.mock_user_repo,
            self.mock_event_publisher
        )

    def test_create_article_success(self):
        # TODO: –¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏
        pass

    def test_create_article_validation_error(self):
        # TODO: –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
        pass

    def test_publish_article_by_author(self):
        # TODO: –¢–µ—Å—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞—Ç—å–∏ –∞–≤—Ç–æ—Ä–æ–º
        pass

    def test_publish_article_by_non_author(self):
        # TODO: –¢–µ—Å—Ç –∑–∞–ø—Ä–µ—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —á—É–∂–æ–π —Å—Ç–∞—Ç—å–∏
        pass

# TODO: –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
class TestArticleAPI:
    def test_create_article_endpoint(self):
        # TODO: –¢–µ—Å—Ç API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
        pass

    def test_list_articles_pagination(self):
        # TODO: –¢–µ—Å—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
        pass
```

### 7. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```python
# TODO: –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
from pydantic import BaseSettings

class Settings(BaseSettings):
    # Database
    database_url: str = "postgresql://localhost/cms"

    # Redis
    redis_url: str = "redis://localhost:6379"

    # JWT
    jwt_secret: str = "your-secret-key"
    jwt_expiration: int = 3600

    # Application
    debug: bool = False
    api_prefix: str = "/api/v1"

    class Config:
        env_file = ".env"

# TODO: –°–æ–∑–¥–∞–π—Ç–µ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
# Dockerfile
# docker-compose.yml
# –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

# TODO: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD pipeline
# GitHub Actions –∏–ª–∏ –∞–Ω–∞–ª–æ–≥
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ:

1. **–ß–µ—Ç–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏
2. **–î–æ–º–µ–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏** - —á–∏—Å—Ç–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
3. **Repository Pattern** - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
4. **Service Layer** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
5. **REST API** - –≤–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
6. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
7. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º** - –ø–æ–ª–Ω—ã–π coverage
8. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

## –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è

### CQRS (Command Query Responsibility Segregation)
```python
# TODO: –†–∞–∑–¥–µ–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏ –∑–∞–ø—Ä–æ—Å—ã
class ArticleCommands:
    def create_article(self, command: CreateArticleCommand) -> int:
        pass

    def publish_article(self, command: PublishArticleCommand) -> None:
        pass

class ArticleQueries:
    def get_article(self, article_id: int) -> ArticleView:
        pass

    def list_articles(self, filters: ArticleFilters) -> List[ArticleSummary]:
        pass
```

### Event Sourcing
```python
# TODO: –î–æ–±–∞–≤–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
class EventStore:
    def save_event(self, event: DomainEvent) -> None:
        pass

    def get_events(self, aggregate_id: str) -> List[DomainEvent]:
        pass

class ArticleAggregate:
    def __init__(self):
        self.events: List[DomainEvent] = []

    def create(self, title: str, content: str) -> None:
        event = ArticleCreatedEvent(title, content)
        self.events.append(event)
        self._apply(event)

    def publish(self) -> None:
        event = ArticlePublishedEvent(self.id)
        self.events.append(event)
        self._apply(event)

    def _apply(self, event: DomainEvent) -> None:
        # TODO: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –∫ –∞–≥—Ä–µ–≥–∞—Ç—É
        pass
```

---

*–ü–æ–º–Ω–∏—Ç–µ: –•–æ—Ä–æ—à–∏–π –º–æ–Ω–æ–ª–∏—Ç - —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–¥ –≤ –æ–¥–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∞ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å—é –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –±—É–¥—É—â–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.*""",
    [
        "–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
        "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É",
        "–°–æ–∑–¥–∞—Ç—å Repository –∏ Service —Å–ª–æ–∏",
        "–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å REST API —Å FastAPI",
        "–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏",
        "–ù–∞–ø–∏—Å–∞—Ç—å unit –∏ integration —Ç–µ—Å—Ç—ã",
        "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –∏ Docker"
    ]
) }}














